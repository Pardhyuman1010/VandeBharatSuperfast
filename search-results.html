<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://vandebharatsuperfast.com/search-results.html" rel="canonical"/>
<title>Train Search Results</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* General page styling */
/* General page styling */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0A0A0A, #0A0A0A, #ffcc80);
    margin: 0;
    padding: 20px;
    color: #333;
}

/* Titles */
h1, h2, h3 {
    text-align: center;
    color: #fff;
}

/* Search Bar */
.search-container {
    display: flex;
    justify-content: center;
    margin: 20px 0;
}
.search-input {
    padding: 12px 18px;
    border-radius: 30px;
    border: 2px solid #ff9800;
    width: 60%;
    max-width: 500px;
    background: #fffaf3;
    font-size: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}
.search-input:focus {
    outline: none;
    border-color: #e65100;
    box-shadow: 0 0 8px rgba(230,81,0,0.6);
}

/* Search Results Table */
.results-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background: linear-gradient(145deg, #000000, #1a1a1a);
    color: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.results-table th, .results-table td {
    padding: 14px 16px;
    text-align: left;
}
.results-table th {
    background: #000;
    color: white;
    font-weight: bold;
}
.results-table tr:nth-child(even) {
    background-color: rgba(255,255,255,0.05);
}
.results-table tr:hover {
    background-color: rgba(255,255,255,0.1);
    transition: background 0.3s ease;
}

/* Modal Styling */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background: rgba(0,0,0,0.6);
}
.modal-content {
    background: #fffaf3;
    margin: 5% auto;
    padding: 20px;
    border-radius: 16px;
    max-width: 750px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    animation: fadeIn 0.3s ease-in-out;
    color: #333;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}
.close {
    color: #333;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}
.close:hover, .close:focus {
    color: #e65100;
}

/* Buttons */
.button-primary {
    background: linear-gradient(90deg, #ff9800, #ffb74d);
    color: #fff;
    padding: 10px 18px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: bold;
    transition: background 0.3s ease, transform 0.2s;
    display: inline-block;
}
.button-primary:hover {
    transform: translateY(-2px);
    background: linear-gradient(90deg, #e65100, #ff9800);
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .modal-content { width: 90%; margin: 10% auto; }
  .search-input { width: 80%; }
}



</style>
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
<h1 class="text-2xl font-bold mb-4">Train Search Results</h1>
<div class="flex gap-2 mb-4">
<input class="border px-3 py-2 rounded flex-1" id="fromStation" list="stationList" placeholder="From Station"/>
<input class="border px-3 py-2 rounded flex-1" id="toStation" list="stationList" placeholder="To Station"/>
<button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 whitespace-nowrap" onclick="searchTrains()">Search</button>
</div>
<datalist id="stationList"></datalist>
<table class="table-auto w-full border bg-white shadow-md" id="resultsTable">
<thead class="bg-gray-200">
<tr>
<th class="px-4 py-2">Train Number</th>
<th class="px-4 py-2">Train Name</th>
<th class="px-4 py-2">Departure Station</th>
<th class="px-4 py-2">Arrival Station</th>
<th class="px-4 py-2">Departure Time</th>
<th class="px-4 py-2">Arrival Time</th>
<th class="px-4 py-2">Journey Duration</th>
</tr>
</thead>
<tbody class="text-center"></tbody>
</table>
</div>
<!-- Station Details Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50" id="stationDetailModal">
<div class="bg-white rounded-lg p-6 w-11/12 md:w-5/6 max-h-[80vh] overflow-auto">
<div class="flex justify-between items-center mb-4">
<h3 class="text-lg font-bold">Train Route Details</h3>
<button class="text-red-600 text-xl" onclick="document.getElementById('stationDetailModal').classList.add('hidden')">Ã—</button>
</div>
<div id="stationDetailModalContent"></div>
</div>
</div>
<script>
    let trainData = [];

    fetch("trains_list_search.json")
      .then(res => res.json())
      .then(data => {
        trainData = data;

        const stationSet = new Set();
        data.forEach(train => {
          stationSet.add(train["Departure Station"]);
          stationSet.add(train["Arrival Station"]);
        });

        const datalist = document.getElementById("stationList");
        stationSet.forEach(station => {
          const option = document.createElement("option");
          option.value = station;
          datalist.appendChild(option);
        });

        const from = localStorage.getItem("fromStation") || "";
        const to = localStorage.getItem("toStation") || "";
        document.getElementById("fromStation").value = from;
        document.getElementById("toStation").value = to;

        searchTrains();
      });

    function searchTrains() {
      const from = document.getElementById("fromStation").value.trim().toLowerCase();
      const to = document.getElementById("toStation").value.trim().toLowerCase();
      const tbody = document.querySelector("#resultsTable tbody");
      tbody.innerHTML = "";

      const filtered = trainData.filter(train => {
        const matchFrom = from ? train["Departure Station"].toLowerCase().includes(from) : true;
        const matchTo = to ? train["Arrival Station"].toLowerCase().includes(to) : true;
        return matchFrom && matchTo;
      });

      if (filtered.length === 0) {
        tbody.innerHTML = `<tr><td colspan="7" class="text-center text-red-600 py-4">No matching trains found.</td></tr>`;
        return;
      }

      filtered.forEach(train => {
        const trainNum = train["Train Number"];
        tbody.innerHTML += `
          <tr class="text-center border-b">
            <td class="px-4 py-2 text-blue-600 underline cursor-pointer" onclick="showTrainDetails('${trainNum}')">${trainNum}</td>
            <td class="px-4 py-2">${train["Train Name"]}</td>
            <td class="px-4 py-2">${train["Departure Station"]}</td>
            <td class="px-4 py-2">${train["Arrival Station"]}</td>
            <td class="px-4 py-2">${train["Departure Time"]}</td>
            <td class="px-4 py-2">${train["Arrival Time"]}</td>
            <td class="px-4 py-2">${train["Journey Duration"]}</td>
          </tr>
        `;
      });
    }

    function showTrainDetails(trainNumber) {
  console.log("Clicked Train Number:", trainNumber); // Debug log

  fetch("train_station_list.json")
    .then(res => res.json())
    .then(data => {
      const stations = data.filter(station => station["Train Number"].toString().trim() === trainNumber.trim());

      if (stations.length === 0) {
        document.getElementById("stationDetailModalContent").innerHTML = "<p>No data found for this train.</p>";
        document.getElementById("stationDetailModal").classList.remove("hidden");
        return;
      }

      const columns = Object.keys(stations[0]);
      let content = `<h2 class="text-xl font-bold mb-4">Train ${trainNumber} - Station Details</h2>
        <div class="overflow-x-auto">
          <table class="w-full table-auto text-sm border-collapse border border-gray-300">
            <thead><tr>`;

      columns.forEach(col => {
        content += `<th class="border border-gray-300 bg-gray-100 px-4 py-2">${col}</th>`;
      });

      content += `</tr></thead><tbody>`;

      stations.forEach(station => {
        content += `<tr>`;
        columns.forEach(col => {
          content += `<td class="border border-gray-300 px-4 py-2">${station[col]}</td>`;
        });
        content += `</tr>`;
      });

      content += `</tbody></table></div>`;

      document.getElementById("stationDetailModalContent").innerHTML = content;
      document.getElementById("stationDetailModal").classList.remove("hidden");
    })
    .catch(error => {
      console.error("Error fetching station list:", error);
      alert("Failed to load train details.");
    });
}

  </script>
</body>
</html>
